const validators = {
  username: (value) => {
    if (!value || value.length < 3 || value.length > 32) {
      return 'Username must be 3-32 characters';
    }
    if (!/^[a-zA-Z0-9_]+$/.test(value)) {
      return 'Username can only contain letters, numbers, and underscores';
    }
    return null;
  },

  password: (value) => {
    if (!value || value.length < 6) {
      return 'Password must be at least 6 characters';
    }
    return null;
  },

  displayName: (value) => {
    if (!value || value.length < 1 || value.length > 64) {
      return 'Display name must be 1-64 characters';
    }
    return null;
  },

  token: (value) => {
    if (!value) {
      return 'Token is required';
    }
    return null;
  },

  roomId: (value) => {
    if (!value || typeof value !== 'string') {
      return 'Room ID is required';
    }
    return null;
  },

  userId: (value) => {
    if (!value || typeof value !== 'string') {
      return 'User ID is required';
    }
    return null;
  }
};

const validate = (field, value) => {
  const validator = validators[field];
  if (!validator) {
    throw new Error(`No validator found for field: ${field}`);
  }
  return validator(value);
};

const validateMultiple = (fields) => {
  const errors = {};
  for (const [field, value] of Object.entries(fields)) {
    const error = validate(field, value);
    if (error) {
      errors[field] = error;
    }
  }
  return Object.keys(errors).length > 0 ? errors : null;
};

export { validators, validate, validateMultiple };
